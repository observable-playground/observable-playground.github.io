(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{MA1v:function(n,t,r){!function(n){"use strict";var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])})(n,r)};function r(n,r){function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}function e(){}var i=Array.isArray||function(n){return n instanceof Array};function u(n){return n&&n._isObservable}function o(n,t){for(var r=0;r<n.length;r++)if(!t(n[r]))return!1;return!0}function s(n,t){for(var r=0;r<n.length;r++)if(t(n[r]))return!0;return!1}function c(n,t){return-1!==l(n,t)}function f(n,t){for(var r,e=[],i=0;i<t.length;i++)n(r=t[i])&&e.push(r);return e}function a(n){return function(t,r){return n(r,t)}}function h(n,t,r){for(var e=0;e<n.length;e++)t=r(t,n[e]);return t}function p(n){return n[0]}var l=Array.prototype.indexOf?function(n,t){return n.indexOf(t)}:function(n,t){for(var r=0;r<n.length;r++)if(t===n[r])return r;return-1};function v(n){return"function"===typeof n}function d(n,t){for(var r,e=[],i=0;i<t.length;i++)r=t[i],e.push(n(r));return e}function y(n){return n.slice(1,n.length)}function b(n){return i(n)?n:[n]}function w(n){return"function"==typeof n?n:function(t){return n}}var m={indexOf:l,indexWhere:function(n,t){for(var r=0;r<n.length;r++)if(t(n[r]))return r;return-1},head:p,always:function(n){return function(){return n}},negate:function(n){return function(t){return!n(t)}},empty:function(n){return 0===n.length},tail:y,filter:f,map:d,each:function(n,t){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t(r,n[r])},toArray:b,contains:c,id:function(n){return n},last:function(n){return n[n.length-1]},all:o,any:s,without:function(n,t){return f((function(t){return t!==n}),t)},remove:function(n,t){var r=l(t,n);if(r>=0)return t.splice(r,1)},fold:h,flatMap:function(n,t){return h(t,[],(function(t,r){return t.concat(n(r))}))},bind:function(n,t){return function(){return n.apply(t,arguments)}},isFunction:v,toFunction:w,toString:function n(t){var r={}.hasOwnProperty;try{if(g++,null==t)return"undefined";if(v(t))return"function";if(i(t))return g>5?"[..]":"["+d(n,t).toString()+"]";if(null!=(null!=t?t.toString:void 0)&&t.toString!==Object.prototype.toString)return t.toString();if("object"===typeof t){if(g>5)return"{..}";var e=[];for(var u in t)if(r.call(t,u)){var o=function(){try{return t[u]}catch(n){return n}}();e.push(n(u)+":"+n(o))}return"{"+e+"}"}return t}finally{g--}}},g=0,E=void 0,S="<no-more>";function D(n,t){if(!t)throw new Error(n)}function I(n){return D("not a function : "+n,m.isFunction(n))}function A(n){return D("no arguments supported",0===n.length)}var k={scheduler:{setTimeout:function(n,t){return setTimeout(n,t)},setInterval:function(n,t){return setInterval(n,t)},clearInterval:function(n){return clearInterval(n)},clearTimeout:function(n){return clearTimeout(n)},now:function(){return(new Date).getTime()}}},_=void 0,B=[],x={},M=[],W=0,O={},T=!1;function P(n){n<=W||(M[n-1]||(M[n-1]=[[],0]),W=n)}function C(n,t){if(!_&&!T)return t();P(1);for(var r=0;r<W-1&&!F(n,M[r][0]);)r++;M[r][0].push([n,t]),_||N()}function F(n,t){for(var r=0;r<t.length;r++)if(t[r][0].id==n.id)return!0;return!1}function N(){var n=W;if(n){var t=!T;T=!0;try{for(;W>=n;){var r=M[W-1];if(!r)throw new Error("Unexpected stack top: "+r);var e=r[0],i=r[1];if(!(i<e.length)){r[0]=[],r[1]=0;break}var u=e[i][1];r[1]++,P(W+1);var o=!1;try{for(u(),o=!0;W>n&&0==M[W-1][0].length;)W--}finally{o||(M=[],W=0)}}}finally{t&&(T=!1)}}}function L(n,t){if(_){var r=x[n.id];return void 0===r?(r=x[n.id]=[t],B.push(n)):r.push(t)}return t()}function V(n,t){var r=B[n],e=r.id,i=x[e];B.splice(n,1),delete x[e],t&&B.length>0&&function n(t){if(!O[t.id]){for(var r,e=t.internalDeps(),i=0;i<e.length;i++)r=e[i],n(r),x[r.id]&&V(m.indexOf(B,r),!1);O[t.id]=!0}}(r);for(var u=0;u<i.length;u++)(0,i[u])()}var q={toString:function(){return m.toString({rootEvent:_,processingAfters:T,waiterObs:B,waiters:x,aftersStack:M,aftersStackHeight:W,flushed:O})},whenDoneWith:L,hasWaiters:function(){return B.length>0},inTransaction:function(n,t,r,e){if(_)return r.apply(t,e);_=n;try{var i=r.apply(t,e);!function(){for(;B.length>0;)V(0,!0);O={}}()}finally{_=void 0,N()}return i},currentEventId:function(){return _?_.id:void 0},wrappedSubscribe:function(n,t,r){I(r);var e=!1,i=!1,u=function(){i=!0},o=function(){e=!0,u()};return u=t((function(t){return C(n,(function(){e||r(t)===S&&o()})),E})),i&&u(),o},afterTransaction:C,soonButNotYet:function(n,t){_?L(n,t):k.scheduler.setTimeout(t,0)},isInTransaction:function(){return void 0!==_}},U=function(){function n(n,t,r){void 0===r&&(r=[]),this._isDesc=!0,this.context=n,this.method=t,this.args=r}return n.prototype.deps=function(){return this.cachedDeps||(this.cachedDeps=Q([this.context].concat(this.args))),this.cachedDeps},n.prototype.toString=function(){var n=m.map(m.toString,this.args);return m.toString(this.context)+"."+m.toString(this.method)+"("+n+")"},n}();function j(n,t){for(var r=[],e=2;e<arguments.length;e++)r[e-2]=arguments[e];var i=n||t;return i&&i._isDesc?n||t:new U(n,t,r)}function Q(n){return i(n)?m.flatMap(Q,n):u(n)?[n]:("undefined"!==typeof n&&null!==n?n._isSource:void 0)?[n.obs]:[]}var z=function(){return E},H=function(){return E};function R(n,t,r){return r.transform(function(n,t){var r=n;return function(n,e){var i=t(r,n),u=i[0],o=i[1];r=u;for(var s=E,c=0;c<o.length;c++)if((s=e(o[c]))===S)return s;return s}}(n,t),new U(r,"withStateMachine",[n,t]))}var Y=function(){function n(n){this._isSome=!0,this.isDefined=!0,this.value=n}return n.prototype.getOrElse=function(n){return this.value},n.prototype.get=function(){return this.value},n.prototype.filter=function(t){return t(this.value)?new n(this.value):J},n.prototype.map=function(t){return new n(t(this.value))},n.prototype.forEach=function(n){n(this.value)},n.prototype.toArray=function(){return[this.value]},n.prototype.inspect=function(){return"Some("+this.value+")"},n.prototype.toString=function(){return this.inspect()},n}(),J={_isNone:!0,getOrElse:function(n){return n},get:function(){throw new Error("None.get()")},filter:function(){return J},map:function(){return J},forEach:function(){},isDefined:!1,toArray:function(){return[]},inspect:function(){return"None"},toString:function(){return this.inspect()}};function X(){return J}function $(n){return n&&(n._isSome||n._isNone)?n:new Y(n)}var G=0,K=function(){function n(){this.id=++G,this.isEvent=!0,this._isEvent=!0,this.isEnd=!1,this.isInitial=!1,this.isNext=!1,this.isError=!1,this.hasValue=!1}return n.prototype.filter=function(n){return!0},n.prototype.inspect=function(){return this.toString()},n.prototype.log=function(){return this.toString()},n.prototype.toNext=function(){return this},n}(),Z=function(n){function t(t){var r=n.call(this)||this;if(r.hasValue=!0,t instanceof K)throw new un("Wrapping an event inside other event");return r.value=t,r}return r(t,n),t.prototype.fmap=function(n){return this.apply(n(this.value))},t.prototype.filter=function(n){return n(this.value)},t.prototype.toString=function(){return m.toString(this.value)},t.prototype.log=function(){return this.value},t}(K),nn=function(n){function t(t){var r=n.call(this,t)||this;return r.isNext=!0,r._isNext=!0,r}return r(t,n),t.prototype.apply=function(n){return new t(n)},t}(Z),tn=function(n){function t(t){var r=n.call(this,t)||this;return r.isInitial=!0,r._isInitial=!0,r}return r(t,n),t.prototype.apply=function(n){return new t(n)},t.prototype.toNext=function(){return new nn(this.value)},t}(Z),rn=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.hasValue=!1,t}return r(t,n),t.prototype.fmap=function(n){return this},t}(K),en=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.isEnd=!0,t}return r(t,n),t.prototype.toString=function(){return"<end>"},t}(rn),un=function(n){function t(t){var r=n.call(this)||this;return r.isError=!0,r.error=t,r}return r(t,n),t.prototype.toString=function(){return"<error> "+m.toString(this.error)},t}(rn);function on(n){return new tn(n)}function sn(n){return new nn(n)}function cn(){return new en}function fn(n){return n&&n._isEvent?n:sn(n)}function an(n){return n&&n._isEvent}function hn(n){return n&&n._isInitial}function pn(n){return n.isError}function ln(n){return n.hasValue}function vn(n){return n.isEnd}function dn(n,t){return n===t}function yn(n,t,r){return t.transform(bn(n),r||new U(t,"take",[n]))}function bn(n){return function(t,r){return t.hasValue?--n>0?r(t):(0===n&&r(t),r(cn()),S):r(t)}}function wn(n,t){t.subscribe((function(t){return"undefined"!==typeof console&&"function"===typeof console.log&&console.log.apply(console,n.concat([t.log()])),E}))}function mn(n){return function(t,r){return"undefined"!==typeof console&&null!==console&&"function"===typeof console.log&&console.log.apply(console,n.concat([t.log()])),r(t)}}function gn(n,t,r){var i,u=t,o=!1;return i=new jt(new U(n,"scan",[t,r]),(function(t){var s=!1,c=e,f=E,a=function(){return s||(s=o=!0,(f=t(new tn(u)))===S&&(c(),c=e)),f};return c=n.subscribeInternal((function(n){if(ln(n)){if(o&&n.isInitial)return E;n.isInitial||a(),s=o=!0;var e=r(u,n.value);return u=e,t(n.apply(e))}return n.isEnd&&(f=a()),f!==S?t(n):f})),q.whenDoneWith(i,a),c}))}var En=function(){function n(n){void 0===n&&(n=[]),this.unsubscribed=!1,this.unsubscribe=m.bind(this.unsubscribe,this),this.unsubscribed=!1,this.subscriptions=[],this.starting=[];for(var t,r=0;r<n.length;r++)t=n[r],this.add(t)}return n.prototype.add=function(n){var t=this;if(!this.unsubscribed){var r=!1,i=e;this.starting.push(n),i=n(this.unsubscribe,(function(){t.unsubscribed||(r=!0,t.remove(i),m.remove(n,t.starting))})),this.unsubscribed||r?i():this.subscriptions.push(i),m.remove(n,this.starting)}},n.prototype.remove=function(n){if(!this.unsubscribed)return void 0!==m.remove(n,this.subscriptions)?n():void 0},n.prototype.unsubscribe=function(){if(!this.unsubscribed){this.unsubscribed=!0;for(var n=this.subscriptions,t=0;t<n.length;t++)n[t]();this.subscriptions=[],this.starting=[]}},n.prototype.count=function(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length},n.prototype.empty=function(){return 0===this.count()},n}();function Sn(n,t){return function(r){var i=!1,u=!1,o=e,s=E,c=function(){if(!i)return n.forEach((function(n){if(i=!0,(s=r(new tn(n)))===S)return o(),o=e,e}))};return o=t((function(t){return t instanceof Z?t.isInitial&&!u?(n=new Y(t.value),E):(t.isInitial||c(),i=!0,n=new Y(t.value),r(t)):(t.isEnd&&(s=c()),s!==S?r(t):s)})),u=!0,c(),o}}function Dn(n,t){return I(t),new jt(n,Sn(X(),t))}function In(n){var t=new Ht(new U("Bacon","once",[n]),(function(r){return q.soonButNotYet(t,(function(){r(fn(n)),r(cn())})),e}));return t}function An(n,t,r){void 0===r&&(r={});var e=t,i=[e],u=[],o=t._isProperty,s=!1,c=(o?Dn:Yt)(r.desc||new U(t,"flatMap_",[n]),(function(t){var i=new En,c=[];function f(r){if(o&&r.isInitial){if(s)return E;s=!0}var e=_n(n(r));return u.push(e),i.add((function(n,r){return e.subscribeInternal((function(i){if(i.isEnd)return m.remove(e,u),function(){var n=c.shift();n&&f(n)}(),a(r),S;i=i.toNext();var o=t(i);return o===S&&n(),o}))}))}function a(n){return n(),i.empty()?t(cn()):E}return i.add((function(n,u){return e.subscribeInternal((function(n){return n.isEnd?a(u):n.isError&&!r.mapError?t(n):r.firstOnly&&i.count()>1?E:i.unsubscribed?S:(r.limit&&i.count()>r.limit?c.push(n):f(n),E)}))})),i.unsubscribe}));return c.internalDeps=function(){return u.length?i.concat(u):i},c}function kn(n){return"function"==typeof n?function(t){return ln(t)?n(t.value):t}:function(t){return n}}function _n(n){return u(n)?n:In(n)}function Bn(n,t){return An(t,n,{mapError:!0,desc:new U(n,"flatMapEvent",[t])})}var xn=function(){function n(n,t){this._isSource=!0,this.flatten=!0,this.ended=!1,this.obs=n,this.sync=t}return n.prototype.subscribe=function(n){return this.obs.subscribeInternal(n)},n.prototype.toString=function(){return this.obs.toString()},n.prototype.markEnded=function(){this.ended=!0},n.prototype.mayHave=function(n){return!0},n}(),Mn=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return r(t,n),t.prototype.consume=function(){return this.value},t.prototype.push=function(n){this.value=n},t.prototype.hasAtLeast=function(n){return!!this.value},t}(xn),Wn=function(n){function t(t,r){var e=n.call(this,t,r)||this;return e.flatten=!1,e.queue=[],e}return r(t,n),t.prototype.consume=function(){return this.queue.shift()},t.prototype.push=function(n){this.queue.push(n)},t.prototype.mayHave=function(n){return!this.ended||this.queue.length>=n},t.prototype.hasAtLeast=function(n){return this.queue.length>=n},t}(xn),On=function(n){function t(t){var r=n.call(this,t,!0)||this;return r.queue=[],r}return r(t,n),t.prototype.consume=function(){var n=this.queue;return this.queue=[],{value:n}},t.prototype.push=function(n){return this.queue.push(n.value)},t.prototype.hasAtLeast=function(n){return!0},t}(xn);function Tn(n){return null!=n&&(n._isSource?n.sync:n._isEventStream)}function Pn(n){return null!=n&&n._isSource?n:null!=n&&n._isProperty?new Mn(n,!1):new Wn(n,!0)}function Cn(){return new Ht(j("Bacon","never"),(function(n){return n(cn()),e}))}function Fn(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return Ln(Rt,n)}function Nn(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return Ln(Dn,n)}function Ln(n,t){if(0===t.length)return Cn();var r=function(n){for(var t=[],r=[],e=0;e<n.length;e++){for(var i,u=n[e],o=u[0],s={f:u[1],ixs:[]},c=!1,f=0;f<o.length;f++){i=o[f];var a=l(t,i);c||(c=Tn(i)),a<0&&(t.push(i),a=t.length-1);for(var h=0;h<s.ixs.length;h++){var p=s.ixs[h];p.index===a&&p.count++}s.ixs.push({index:a,count:1})}if(o.length>0&&!c)throw new Error("At least one EventStream required, none found in "+o);o.length>0&&r.push(s)}return[d(Pn,t),r]}(jn(t)),e=r[0],i=r[1];if(!e.length)return Cn();var u,a,h=s(e,(function(n){return n.flatten}))&&(u=d((function(n){return n.obs}),e),void 0===a&&(a=[]),s(u,(function n(t){if(c(a,t))return!0;var r=t.internalDeps();return r.length?(a.push(t),s(r,n)):(a.push(t),!1)}))),p=n(new U("Bacon","when",Array.prototype.slice.call(t)),(function(n){var t=[],r=!1;function u(n){for(var t=0;t<n.ixs.length;t++){var r=n.ixs[t];if(!e[r.index].hasAtLeast(r.count))return!1}return!0}function s(n){for(var t=0;t<n.ixs.length;t++){var r=n.ixs[t];if(!e[r.index].mayHave(r.count))return!0}return!1}function c(n){return!n.source.flatten}return new En(d((function(a){return function(l){function v(){return q.whenDoneWith(p,d)}function d(){var a=function r(){var o;if(void 0!==(o=t.pop()))for(var s,a=E,h=0;h<i.length;h++)if(u(s=i[h])){for(var p=[],l=0;l<s.ixs.length;l++){var v=e[s.ixs[l].index].consume();if(!v)throw new Error("Event was undefined");p.push(v.value)}var d=s.f.apply(null,p);return a=n(o.e.apply(d)),t.length&&(t=f(c,t)),a===S?a:r()}return E}();r&&(o(e,Qn)||o(i,s))&&(a=S,n(cn())),a===S&&l()}return a.subscribe((function(e){var i=E;if(e.isEnd)r=!0,a.markEnded(),v();else if(e.isError)i=n(e);else{var u=e;a.push(u),a.sync&&(t.push({source:a,e:u}),h||q.hasWaiters()?v():d())}return i===S&&l(),i}))}}),e)).unsubscribe}));return p}function Vn(n){for(var t=0,r=n.length,e=[];t<r;){var i=b(n[t++]),u=w(n[t++]);e.push([i,u])}return D("when: expecting arguments in the form (Observable+,function)+",r%2===0),e}function qn(n){return n instanceof Array&&!u(n[n.length-1])}function Un(n){return n[0]instanceof Array}function jn(n){for(var t=[],r=0;r<n.length;r++){var e=n[r];if(!qn(e))return Vn(n);if(Un(e))t.push([e[0],w(e[1])]);else{var i=e.slice(0,e.length-1),u=w(e[e.length-1]);t.push([i,u])}}return t}function Qn(n){return!n.sync||n.ended}function zn(n,t,r){return Fn([new Mn(t.toProperty(),!1),new Mn(n,!0),a(r)]).withDesc(new U(n,"withLatestFrom",[t,r]))}function Hn(n,t,r){return Nn([new Mn(t.toProperty(),!1),new Mn(n,!0),a(r)]).withDesc(new U(n,"withLatestFrom",[t,r]))}function Rn(n,t,r){if(n instanceof jt)return Hn(n,t,r);if(n instanceof Ht)return zn(n,t,r);throw new Error("Unknown observable: "+n)}function Yn(n,t){return t instanceof jt?Rn(n,t,(function(n,t){return t})):n.transform(Jn(t),new U(n,"map",[t]))}function Jn(n){var t=m.toFunction(n);return function(n,r){return r(n.fmap(t))}}function Xn(n){return new jt(new U("Bacon","constant",[n]),(function(t){return t(on(n)),t(cn()),e}))}function $n(n){return n=Array.prototype.slice.call(n),m.flatMap(Gn,n)}function Gn(n){return u(n)?[n]:i(n)?$n(n):[Xn(n)]}function Kn(n){return m.isFunction(n[0])?[$n(Array.prototype.slice.call(n,1)),n[0]]:[$n(Array.prototype.slice.call(n,0,n.length-1)),m.last(n)]}function Zn(n,t){return Ln((function(n,r){return new Ht(n,r,void 0,t)}),[m.map((function(n){return new On(n)}),n),function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return n}]).withDesc(new U("Bacon","groupSimultaneous",n))}function nt(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if((n=$n(n)).length){for(var r=[],e=0;e<n.length;e++){var i=u(n[e])?n[e]:Xn(n[e]);r.push(rt(i))}return Nn([r,function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return n}]).withDesc(new U("Bacon","combineAsArray",n))}return Xn([])}function tt(n,t,r){return Nn([[rt(n),rt(t)],r]).withDesc(new U(n,"combine",[t,r]))}function rt(n){return new Mn(n,!0)}function et(n,t){return An(kn(t),n,{desc:new U(n,"flatMapConcat",[t]),limit:1})}function it(n,t){void 0===t&&(t=m.id);var r=new U("Bacon","fromBinder",[n,t]);return new Ht(r,(function(r){var e=!1,u=!1,o=function(){if(!e)return"undefined"!==typeof s&&null!==s?(s(),e=!0):u=!0},s=n((function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var u=t.apply(void 0,n),s=i(u)&&an(m.last(u))?u:[u],c=E,f=0;f<s.length;f++){var a=fn(s[f]);if((c=r(a))===S||a.isEnd)return o(),c}return c}));return u&&o(),o}))}function ut(n,t){var r=new U("Bacon","fromPoll",[n,t]);return it((function(t){var r=k.scheduler.setInterval(t,n);return function(){return k.scheduler.clearInterval(r)}}),t).withDesc(r)}function ot(n,t){return ut(n,(function(){return sn(t)})).withDesc(new U("Bacon","interval",[n,t]))}function st(n,t,r){return n instanceof Ht?function(n,t,r){return ct(n.toProperty(),t,r).withDesc(new U(n,"sampledBy",[t]))}(n,t,r):ct(n,t,r)}function ct(n,t,r){return Rn(t,n,a(function(n){return"function"==typeof n?n:m.id}(r))).withDesc(new U(n,"sampledBy",[t]))}function ft(n,t){return ct(n,ot(t,{}),(function(n,t){return n})).withDesc(new U(n,"sample",[t]))}function at(n,t,r){return new jt(new U(n,"transform",[t]),(function(r){return n.subscribeInternal((function(n){return t(n,r)}))})).withDesc(r)}function ht(n,t,r){return new Ht(new U(n,"transform",[t]),(function(r){return n.subscribeInternal((function(n){return t(n,r)}))}),void 0,zt).withDesc(r)}function pt(n,t){var r,e=function(n){return t(n,r)};return function(t,i){return r=i,n(t,e)}}function lt(n,t,r,e){return t instanceof jt?Rn(n,t,(function(n,t){return[n,t]})).transform(pt(r((function(n){return n[1]})),Jn((function(n){return n[0]}))),e):n.transform(r(function(n){if("boolean"==typeof n)return m.always(n);if("function"!=typeof n)throw new Error("Not a function: "+n);return n}(t)),e)}function vt(n){return function(t,r){return t.filter(n)?r(t):E}}function dt(n){return n.map((function(n){return!n})).withDesc(new U(n,"not",[]))}function yt(n){return Qt(n)?n:Xn(n)}function bt(n,t){return An(kn(t),n,{firstOnly:!0,desc:new U(n,"flatMapFirst",[t])})}function wt(n,t,r){return new Ht(new U(n,"concat",[t]),(function(r){var i=e,u=n.dispatcher.subscribe((function(n){return n.isEnd?(i=t.toEventStream().dispatcher.subscribe(r),E):r(n)}));return function(){return u(),i()}}),void 0,r)}function mt(n,t,r){return n.scan(t,r).last().withDesc(new U(n,"fold",[t,r]))}var gt={};function Et(n,t){return An(kn(t),n,{desc:new U(n,"flatMap",[t])})}function St(n,t){return An((function(n){if(n instanceof un){var r=n.error;return t(r)}return n}),n,{mapError:!0,desc:new U(n,"flatMapError",[t])})}var Dt=[],It=!1;function At(n){if(Dt.length&&!It)try{It=!0,Dt.forEach((function(t){t(n)}))}finally{It=!1}}function kt(n,t){var r=m.toFunction(t),e=Qt(n)?n.toEventStream(zt):n,i=Et(e,(function(n){return _n(r(n)).takeUntil(e)}));return Qt(n)&&(i=i.toProperty()),i.withDesc(new U(n,"flatMapLatest",[r]))}var _t=function(){function n(n,t,r){this.pushing=!1,this.ended=!1,this.prevError=void 0,this.unsubSrc=void 0,this._subscribe=t,this._handleEvent=r,this.subscribe=m.bind(this.subscribe,this),this.handleEvent=m.bind(this.handleEvent,this),this.subscriptions=[],this.observable=n,this.queue=[]}return n.prototype.hasSubscribers=function(){return this.subscriptions.length>0},n.prototype.removeSub=function(n){return this.subscriptions=m.without(n,this.subscriptions),this.subscriptions},n.prototype.push=function(n){return n.isEnd&&(this.ended=!0),q.inTransaction(n,this,this.pushIt,[n])},n.prototype.pushToSubscriptions=function(n){try{for(var t=this.subscriptions,r=t.length,e=0;e<r;e++){var i=t[e];(i.sink(n)===S||n.isEnd)&&this.removeSub(i)}return!0}catch(u){throw this.pushing=!1,this.queue=[],u}},n.prototype.pushIt=function(n){if(this.pushing)return this.queue.push(n),E;if(n!==this.prevError){for(n.isError&&(this.prevError=n),this.pushing=!0,this.pushToSubscriptions(n),this.pushing=!1;;){var t=this.queue.shift();if(!t)break;this.push(t)}return this.hasSubscribers()?E:(this.unsubscribeFromSource(),S)}},n.prototype.handleEvent=function(n){return this._handleEvent?this._handleEvent(n):this.push(n)},n.prototype.unsubscribeFromSource=function(){this.unsubSrc&&this.unsubSrc(),this.unsubSrc=void 0},n.prototype.subscribe=function(n){var t=this;if(this.ended)return n(cn()),e;I(n);var r={sink:n};return this.subscriptions.push(r),1===this.subscriptions.length&&(this.unsubSrc=this._subscribe(this.handleEvent),I(this.unsubSrc)),function(){if(t.removeSub(r),!t.hasSubscribers())return t.unsubscribeFromSource()}},n.prototype.inspect=function(){return this.observable.toString()},n}(),Bt=function(n){function t(t,r,e){var i=n.call(this,t,r,e)||this;return i.current=X(),i.propertyEnded=!1,i.subscribe=m.bind(i.subscribe,i),i}return r(t,n),t.prototype.push=function(t){return t.isEnd&&(this.propertyEnded=!0),t instanceof Z?(this.current=new Y(t),this.currentValueRootId=q.currentEventId()):t.hasValue&&console.error("Unknown event, two Bacons loaded?",t.constructor),n.prototype.push.call(this,t)},t.prototype.maybeSubSource=function(t,r){return r===S?e:this.propertyEnded?(t(cn()),e):n.prototype.subscribe.call(this,t)},t.prototype.subscribe=function(n){var t=this,r=E;if(this.current.isDefined&&(this.hasSubscribers()||this.propertyEnded)){var e=q.currentEventId(),i=this.currentValueRootId;return!this.propertyEnded&&i&&e&&e!==i?(q.whenDoneWith(this.observable,(function(){if(t.currentValueRootId===i)return n(on(t.current.get().value))})),this.maybeSubSource(n,r)):(q.inTransaction(void 0,this,(function(){return r=n(on(t.current.get().value))}),[]),this.maybeSubSource(n,r))}return this.maybeSubSource(n,r)},t.prototype.inspect=function(){return this.observable+" current= "+this.current},t}(_t);function xt(n,t,r){return An(kn(r),n,{desc:new U(n,"flatMapWithConcurrencyLimit",[t,r]),limit:t})}function Mt(n,t,r){var i=function(n){if(void 0!==n){if("number"===typeof n){var t=n;return function(n){return k.scheduler.setTimeout(n,t)}}return n}}(t);function u(n){return n.values.length===r?n.flush():void 0!==i?n.schedule(i):void 0}var o=new U(n,"bufferWithTimeOrCount",[t,r]);return function(n,t,r){void 0===t&&(t=e),void 0===r&&(r=e);var i=E,u=new Wt(r,t);return n.transform((function(n,r){return u.push=r,ln(n)?(u.values.push(n.value),t(u)):pn(n)?i=r(n):vn(n)&&(u.end=n,u.scheduled||u.flush()),i})).withDesc(new U(n,"buffer",[]))}(n,u,u).withDesc(o)}var Wt=function(){function n(n,t){this.push=function(n){return E},this.scheduled=null,this.end=void 0,this.values=[],this.onFlush=n,this.onInput=t}return n.prototype.flush=function(){if(this.scheduled&&(k.scheduler.clearTimeout(this.scheduled),this.scheduled=null),this.values.length>0){var n=this.values;this.values=[];var t=this.push(sn(n));if(null!=this.end)return this.push(this.end);if(t!==S)return this.onFlush(this)}else if(null!=this.end)return this.push(this.end)},n.prototype.schedule=function(n){var t=this;if(!this.scheduled)return this.scheduled=n((function(){return t.flush()}))},n}();function Ot(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var r=$n(n);return r.length?new Ht(new U("Bacon","mergeAll",r),(function(n){var t=0,e=d((function(e){return function(i){return e.subscribeInternal((function(e){if(e.isEnd)return++t===r.length?n(cn()):E;e=e.toNext();var u=n(e);return u===S&&i(),u}))}}),r);return new En(e).unsubscribe})):Cn()}function Tt(n,t){return it((function(r){var e=k.scheduler.setTimeout((function(){return r([fn(t),cn()])}),n);return function(){return k.scheduler.clearTimeout(e)}})).withDesc(new U("Bacon","later",[n,t]))}function Pt(n){return function(t,r){return t.filter(n)?r(t):(r(cn()),S)}}function Ct(n){var t=!1;return function(r,e){return!t&&ln(r)&&n(r.value)?E:(r.hasValue&&(t=!0),e(r))}}function Ft(n,t,r){void 0===r&&(r=m.id);var e={};return n.transform(pt(vt((function(n){return!e[t(n)]})),Jn((function(i){var u=t(i),o=n.changes().filter((function(n){return t(n)===u})),s=In(i).concat(o),c=r(s,i).toEventStream().transform((function(n,t){var r=t(n);return n.isEnd&&delete e[u],r}));return e[u]=c,c}))))}var Nt={};function Lt(n){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var e=Kn(arguments);return t=e[0],n=e[1],Fn([t=m.map((function(n){return n.toEventStream()}),t),n]).withDesc(new U("Bacon","zipWith",[n].concat(t)))}function Vt(n){function t(n,t,r){return(function(n){return n[n.length-1]}(n))[t]=r,r}function r(n){return i(n)?[]:{}}function e(n){if(u(n))return!0;if(n&&(n.constructor==Object||n.constructor==Array))for(var t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return!0}function o(n,i){u(i)?(f.push(i),c.push(function(n,r){return function(e,i){t(e,n,i[r])}}(n,f.length-1))):e(i)?(c.push(function(n,e){return function(i){var u=r(e);t(i,n,u),i.push(u)}}(n,i)),s(i),c.push((function(n){n.pop()}))):c.push(function(n,r){return function(e){t(e,n,r)}}(n,i))}function s(n){m.each(n,o)}var c=[],f=[];return(e(n)?(s(n),nt(f).map((function(t){for(var e=r(n),i=[e],u=0;u<c.length;u++)(0,c[u])(i,t);return e}))):Xn(n)).withDesc(new U("Bacon","combineTemplate",[n]))}var qt=0,Ut=function(){function n(n){this.id=++qt,this._isObservable=!0,this.desc=n,this.initialDesc=n}return n.prototype.awaiting=function(n){return function(n,t){return Zn([n,t],zt).map((function(n){return 0===n[1].length})).toProperty(!1).skipDuplicates().withDesc(new U(n,"awaiting",[t]))}(this,n)},n.prototype.bufferingThrottle=function(n){return function(n,t){var r=new U(n,"bufferingThrottle",[t]);return n.transformChanges(r,(function(n){return n.flatMapConcat((function(n){return In(n).concat(Tt(t,n).errors())}))}))}(this,n)},n.prototype.combine=function(n,t){return tt(this,n,t)},n.prototype.debounce=function(n){return function(n,t){return n.transformChanges(new U(n,"debounce",[t]),(function(n){return n.flatMapLatest((function(n){return Tt(t,n)}))}))}(this,n)},n.prototype.debounceImmediate=function(n){return function(n,t){return n.transformChanges(new U(n,"debounceImmediate",[t]),(function(n){return n.flatMapFirst((function(n){return In(n).concat(Tt(t,n).errors())}))}))}(this,n)},n.prototype.decode=function(n){return function(n,t){return n.combine(Vt(t),(function(n,t){return t[n]})).withDesc(new U(n,"decode",[t]))}(this,n)},n.prototype.delay=function(n){return function(n,t){return n.transformChanges(new U(n,"delay",[t]),(function(n){return n.flatMap((function(n){return Tt(t,n)}))}))}(this,n)},n.prototype.deps=function(){return this.desc.deps()},n.prototype.diff=function(n,t){return function(n,t,r){return at(gn(n,[t,Nt],(function(n,t){return[t,r(n[0],t)]})),pt(vt((function(n){return n[1]!==Nt})),Jn((function(n){return n[1]}))),new U(n,"diff",[t,r]))}(this,n,t)},n.prototype.doAction=function(n){return this.transform(function(n){return function(t,r){return ln(t)&&n(t.value),r(t)}}(n),new U(this,"doAction",[n]))},n.prototype.doEnd=function(n){return this.transform(function(n){return function(t,r){return vn(t)&&n(),r(t)}}(n),new U(this,"doEnd",[n]))},n.prototype.doError=function(n){return this.transform(function(n){return function(t,r){return pn(t)&&n(t.error),r(t)}}(n),new U(this,"doError",[n]))},n.prototype.doLog=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return this.transform(mn(n),new U(this,"doLog",n))},n.prototype.endAsValue=function(){return this.transform((function(n,t){return vn(n)?(t(sn({})),t(cn()),S):E}))},n.prototype.endOnError=function(n){return void 0===n&&(n=function(n){return!0}),function(n,t){return void 0===t&&(t=function(n){return!0}),n.transform((function(n,r){return pn(n)&&t(n.error)?(r(n),r(cn())):r(n)}),new U(n,"endOnError",[]))}(this,n)},n.prototype.errors=function(){return this.filter((function(n){return!1})).withDesc(new U(this,"errors"))},n.prototype.filter=function(n){return function(n,t){return lt(n,t,vt,new U(n,"filter",[t]))}(this,n)},n.prototype.first=function(){return yn(1,this,new U(this,"first"))},n.prototype.firstToPromise=function(n){return function(n,t){if("function"!==typeof t){if("function"!==typeof Promise)throw new Error("There isn't default Promise, use shim or parameter");t=function(n){return new Promise(n)}}return new t((function(t,r){return n.subscribe((function(n){return ln(n)&&t(n.value),pn(n)&&r(n.error),S}))}))}(this,n)},n.prototype.fold=function(n,t){return mt(this,n,t)},n.prototype.forEach=function(n){return void 0===n&&(n=z),this.onValue(n)},n.prototype.holdWhen=function(n){return function(n,t){var r=!1,e=[],i=!1;return new Ht(new U(n,"holdWhen",[t]),(function(u){var o=new En,s=!1,c=function(n){return n&&n(),o.empty()&&s?u(cn()):E};return o.add((function(n,o){return t.subscribeInternal((function(n){if(ln(n)){r=n.value;var t=E;if(!r){var s=e;e=[];for(var f=0;f<s.length;f++)t=u(sn(s[f]));i&&(u(cn()),o(),t=S)}return t}return n.isEnd?c(o):u(n)}))})),o.add((function(t,o){return n.subscribeInternal((function(n){return r&&ln(n)?(e.push(n.value),E):n.isEnd&&e.length?(i=!0,c(o)):u(n)}))})),s=!0,c(),o.unsubscribe}))}(this,n)},n.prototype.inspect=function(){return this.toString()},n.prototype.internalDeps=function(){return this.initialDesc.deps()},n.prototype.last=function(){return function(n){var t;return n.transform((function(n,r){return vn(n)?(t&&r(t),r(cn()),S):ln(n)?(t=n,E):r(n)})).withDesc(new U(n,"last",[]))}(this)},n.prototype.log=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return wn(n,this),this},n.prototype.mapEnd=function(n){return this.transform(function(n){var t=m.toFunction(n);return function(n,r){return vn(n)?(r(sn(t(n))),r(cn()),S):r(n)}}(n),new U(this,"mapEnd",[n]))},n.prototype.mapError=function(n){return this.transform(function(n){var t=m.toFunction(n);return function(n,r){return pn(n)?r(sn(t(n.error))):r(n)}}(n),new U(this,"mapError",[n]))},n.prototype.name=function(n){return this._name=n,this},n.prototype.onEnd=function(n){return void 0===n&&(n=H),this.subscribe((function(t){return t.isEnd?n():E}))},n.prototype.onError=function(n){return void 0===n&&(n=z),this.subscribe((function(t){return pn(t)?n(t.error):E}))},n.prototype.onValue=function(n){return void 0===n&&(n=z),this.subscribe((function(t){return ln(t)?n(t.value):E}))},n.prototype.onValues=function(n){return this.onValue((function(t){return n.apply(void 0,t)}))},n.prototype.reduce=function(n,t){return mt(this,n,t)},n.prototype.sampledBy=function(n){return st(this,n,arguments[1])},n.prototype.scan=function(n,t){return gn(this,n,t)},n.prototype.skip=function(n){return function(n,t){return n.transform((function(n,r){return n.hasValue&&t>0?(t--,E):r(n)}),new U(n,"skip",[t]))}(this,n)},n.prototype.skipDuplicates=function(n){return function(n,t){void 0===t&&(t=dn);var r=new U(n,"skipDuplicates",[]);return R(X(),(function(n,r){return ln(r)?r.isInitial||"undefined"!==typeof(e=n)&&null!==e&&e._isNone||!t(n.get(),r.value)?[new Y(r.value),[r]]:[n,[]]:[n,[r]];var e}),n).withDesc(r)}(this,n)},n.prototype.skipErrors=function(){return(n=this).transform((function(n,t){return pn(n)?E:t(n)}),new U(n,"skipErrors",[]));var n},n.prototype.skipUntil=function(n){return function(n,t){var r=t.transform(pt(bn(1),Jn(!0))).toProperty().startWith(!1);return n.filter(r).withDesc(new U(n,"skipUntil",[t]))}(this,n)},n.prototype.skipWhile=function(n){return function(n,t){return lt(n,t,Ct,new U(n,"skipWhile",[t]))}(this,n)},n.prototype.slidingWindow=function(n,t){return void 0===t&&(t=0),function(n,t,r){return void 0===r&&(r=0),n.scan([],(function(n,r){return n.concat([r]).slice(-t)})).filter((function(n){return n.length>=r})).withDesc(new U(n,"slidingWindow",[t,r]))}(this,n,t)},n.prototype.subscribe=function(n){var t=this;return void 0===n&&(n=z),q.wrappedSubscribe(this,(function(n){return t.subscribeInternal(n)}),n)},n.prototype.take=function(n){return yn(n,this)},n.prototype.takeUntil=function(n){return function(n,t){var r=Zn([n.mapEnd(gt),t.skipErrors()],zt);return n instanceof jt&&(r=r.toProperty()),r.transform((function(n,t){if(ln(n)){var r=n.value,e=r[0];if(r[1].length)return t(cn());for(var i=E,u=0;u<e.length;u++){var o=e[u];if(o===gt)return t(cn());i=t(sn(o))}return i}return t(n)}),new U(n,"takeUntil",[t]))}(this,n)},n.prototype.takeWhile=function(n){return function(n,t){return lt(n,t,Pt,new U(n,"takeWhile",[t]))}(this,n)},n.prototype.throttle=function(n){return function(n,t){return n.transformChanges(new U(n,"throttle",[t]),(function(n){return n.bufferWithTime(t).map((function(n){return n[n.length-1]}))}))}(this,n)},n.prototype.toPromise=function(n){return function(n,t){return n.last().firstToPromise(t)}(this,n)},n.prototype.toString=function(){return this._name?this._name:this.desc.toString()},n.prototype.withDesc=function(n){return n&&(this.desc=n),this},n.prototype.withDescription=function(n,t){for(var r=[],e=2;e<arguments.length;e++)r[e-2]=arguments[e];return this.desc=j.apply(void 0,[n,t].concat(r)),this},n.prototype.zip=function(n,t){return function(n,t,r){return Lt(r||Array,n,t).withDesc(new U(n,"zip",[t]))}(this,n,t)},n}(),jt=function(n){function t(t,r,e){var i=n.call(this,t)||this;return i._isProperty=!0,I(r),i.dispatcher=new Bt(i,r,e),At(i),i}return r(t,n),t.prototype.and=function(n){return r=n,(t=this).combine(yt(r),(function(n,t){return!(!n||!t)})).withDesc(new U(t,"and",[r]));var t,r},t.prototype.changes=function(){var n=this;return new Ht(new U(this,"changes",[]),(function(t){return n.dispatcher.subscribe((function(n){return n.isInitial?E:t(n)}))}))},t.prototype.concat=function(n){return this.transformChanges(j(this,"concat",n),(function(t){return t.concat(n)}))},t.prototype.transformChanges=function(n,t){return function(n,t,r){var e,i,u=t(new Ht(j(n,"changes",[]),(function(t){return n.dispatcher.subscribe((function(n){return!e&&hn(n)&&(e=n,q.whenDoneWith(o,(function(){if(!i)throw new Error("Init sequence fail");i(e)}))),n.isInitial?E:t(n)}))}),void 0,zt)),o=Dn(r,(function(n){return i=n,u.dispatcher.subscribe((function(t){n(t)}))}));return o}(this,t,n)},t.prototype.flatMap=function(n){return Et(this,n)},t.prototype.flatMapConcat=function(n){return et(this,n)},t.prototype.flatMapError=function(n){return St(this,n)},t.prototype.flatMapEvent=function(n){return Bn(this,n)},t.prototype.flatMapFirst=function(n){return bt(this,n)},t.prototype.flatMapLatest=function(n){return kt(this,n)},t.prototype.flatMapWithConcurrencyLimit=function(n,t){return xt(this,n,t)},t.prototype.groupBy=function(n,t){return Ft(this,n,t)},t.prototype.map=function(n){return Yn(this,n)},t.prototype.not=function(){return dt(this)},t.prototype.or=function(n){return r=n,(t=this).combine(yt(r),(function(n,t){return n||t})).withDesc(new U(t,"or",[r]));var t,r},t.prototype.sample=function(n){return ft(this,n)},t.prototype.startWith=function(n){return function(n,t){return n.scan(t,(function(n,t){return t})).withDesc(new U(n,"startWith",[t]))}(this,n)},t.prototype.subscribeInternal=function(n){return void 0===n&&(n=z),this.dispatcher.subscribe(n)},t.prototype.toEventStream=function(n){var t=this;return new Ht(new U(this,"toEventStream",[]),(function(n){return t.subscribeInternal((function(t){return n(t.toNext())}))}),void 0,n)},t.prototype.toProperty=function(){return A(arguments),this},t.prototype.transform=function(n,t){return at(this,n,t)},t.prototype.withLatestFrom=function(n,t){return Hn(this,n,t)},t.prototype.withStateMachine=function(n,t){return R(n,t,this)},t}(Ut);function Qt(n){return!!n._isProperty}var zt={forceAsync:!1},Ht=function(n){function t(t,r,e,i){var u=n.call(this,t)||this;return u._isEventStream=!0,i!==zt&&(r=function(n,t){var r=!1;return function(e){var i,u=q.isInTransaction();function o(){var n=i||[];i=void 0;for(var t=0;t<n.length;t++){var r=n[t];e(r)}}r=!0;try{return t((function(t){return r||i?(i?i.push(t):(i=[t],u?q.soonButNotYet(n,o):k.scheduler.setTimeout(o,0)),E):e(t)}))}finally{r=!1}}}(u,r)),u.dispatcher=new _t(u,r,e),At(u),u}return r(t,n),t.prototype.bufferWithTime=function(n){return function(n,t){return Mt(n,t,Number.MAX_VALUE).withDesc(new U(n,"bufferWithTime",[t]))}(this,n)},t.prototype.bufferWithCount=function(n){return function(n,t){return Mt(n,void 0,t).withDesc(new U(n,"bufferWithCount",[t]))}(this,n)},t.prototype.bufferWithTimeOrCount=function(n,t){return Mt(this,n,t)},t.prototype.changes=function(){return this},t.prototype.concat=function(n,t){return wt(this,n,t)},t.prototype.transformChanges=function(n,t){return t(this).withDesc(n)},t.prototype.flatMap=function(n){return Et(this,n)},t.prototype.flatMapConcat=function(n){return et(this,n)},t.prototype.flatMapError=function(n){return St(this,n)},t.prototype.flatMapFirst=function(n){return bt(this,n)},t.prototype.flatMapLatest=function(n){return kt(this,n)},t.prototype.flatMapWithConcurrencyLimit=function(n,t){return xt(this,n,t)},t.prototype.flatMapEvent=function(n){return Bn(this,n)},t.prototype.flatScan=function(n,t){return function(n,t,r){var e=t;return n.flatMapConcat((function(n){return _n(r(e,n)).doAction((function(n){return e=n}))})).toProperty().startWith(t).withDesc(new U(n,"flatScan",[t,r]))}(this,n,t)},t.prototype.groupBy=function(n,t){return Ft(this,n,t)},t.prototype.map=function(n){return Yn(this,n)},t.prototype.merge=function(n){return function(n){if(!(null!=n?n._isEventStream:void 0))throw new Error("not an EventStream : "+n)}(n),Ot(this,n).withDesc(new U(this,"merge",[n]))},t.prototype.not=function(){return dt(this)},t.prototype.startWith=function(n){return function(n,t){return In(t).concat(n).withDesc(new U(n,"startWith",[t]))}(this,n)},t.prototype.subscribeInternal=function(n){return void 0===n&&(n=z),this.dispatcher.subscribe(n)},t.prototype.toEventStream=function(){return this},t.prototype.toProperty=function(n){var t=arguments.length?$(n):X(),r=this.dispatcher,e=new U(this,"toProperty",Array.prototype.slice.apply(arguments)),i=r.subscribe;return new jt(e,Sn(t,i))},t.prototype.transform=function(n,t){return ht(this,n,t)},t.prototype.withLatestFrom=function(n,t){return zn(this,n,t)},t.prototype.withStateMachine=function(n,t){return R(n,t,this)},t}(Ut);function Rt(n,t){return new Ht(n,t)}function Yt(n,t){return new Ht(n,t,void 0,zt)}function Jt(n){return"undefined"!==typeof Symbol&&Symbol[n]?Symbol[n]:"undefined"!==typeof Symbol&&"function"===typeof Symbol.for?Symbol[n]=Symbol.for(n):"@@"+n}var Xt=function(){function n(n){this.observable=n}return n.prototype.subscribe=function(n,t,r){var e="function"===typeof n?{next:n,error:t,complete:r}:n,i={closed:!1,unsubscribe:function(){i.closed=!0,u()}},u=this.observable.subscribe((function(n){ln(n)&&e.next?e.next(n.value):pn(n)?(e.error&&e.error(n.error),i.unsubscribe()):n.isEnd&&(i.closed=!0,e.complete&&e.complete())}));return i},n}();function $t(n){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(r){return n.apply(void 0,[r].concat(t))}}}Xt.prototype[Jt("observable")]=function(){return this},Ut.prototype.toESObservable=function(){return new Xt(this)},Ut.prototype[Jt("observable")]=Ut.prototype.toESObservable;var Gt=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"],["bind","unbind"]],Kt=function(n){for(var t,r=0;r<Gt.length;r++){var e=[n[(t=Gt[r])[0]],n[t[1]]];if(e[0]&&e[1])return e}for(var i=0;i<Gt.length;i++){var u=n[(t=Gt[i])[0]];if(u)return[u,function(){}]}throw new Error("No suitable event methods in "+n)};function Zt(n,t,r){var e=Kt(n),i=e[0],u=e[1],o=new U("Bacon","fromEvent",[n,t]);return it((function(r){return e=t,m.isFunction(e)?(t(i.bind(n),r),function(){return t(u.bind(n),r)}):(i.call(n,t,r),function(){return u.call(n,t,r)});var e}),r).withDesc(o)}function nr(n){var t=0;return it((function(r){var e=!1,i=E,u=function(){};function o(n){return n.isEnd?(e?s():e=!0,E):i=r(n)}function s(){var s;for(e=!0;e&&i!==S;)s=n(t++),e=!1,s?u=s.subscribeInternal(o):r(cn());e=!0}return s(),function(){return u()}})).withDesc(new U("Bacon","repeat",[n]))}function tr(n){return Tt(n,"").filter(!1).withDesc(new U("Bacon","silence",[n]))}function rr(n){return[fn(n),cn()]}function er(n,t){return function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return n.apply(void 0,t.concat(r))}}var ir,ur=(ir=function(n){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return m.isFunction(n)?t.length?er(n,t):n:m.always(n)},function(n){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if("object"===typeof n&&t.length){var e=n,i=t[0];n=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return e[i].apply(e,n)},t=t.slice(1)}return ir.apply(void 0,[n].concat(t))});function or(n,t){return ur.apply(void 0,[n].concat(t))}var sr=function(n){function t(){var t=n.call(this,new U("Bacon","Bus",[]),(function(n){return t.subscribeAll(n)}))||this;return t.pushing=!1,t.pushQueue=void 0,t.ended=!1,t.subscriptions=[],t.unsubAll=m.bind(t.unsubAll,t),t.subscriptions=[],t.ended=!1,t}return r(t,n),t.prototype.plug=function(n){var t=this;if(function(n){if(!(null!=n?n._isObservable:void 0))throw new Error("not an Observable : "+n)}(n),!this.ended){var r={input:n,unsub:void 0};return this.subscriptions.push(r),"undefined"!==typeof this.sink&&this.subscribeInput(r),function(){return t.unsubscribeInput(n)}}},t.prototype.end=function(){if(this.ended=!0,this.unsubAll(),"function"===typeof this.sink)return this.sink(cn())},t.prototype.push=function(n){if(!this.ended&&"function"===typeof this.sink){var t=!this.pushing;if(!t)return this.pushQueue||(this.pushQueue=[]),void this.pushQueue.push(n);this.pushing=!0;try{return this.sink(sn(n))}finally{if(t&&this.pushQueue){for(var r=0;r<this.pushQueue.length;){var e=this.pushQueue[r];this.sink(sn(e)),r++}this.pushQueue=void 0}this.pushing=!1}}},t.prototype.error=function(n){if("function"===typeof this.sink)return this.sink(new un(n))},t.prototype.unsubAll=function(){for(var n,t=this.subscriptions,r=0;r<t.length;r++)"function"===typeof(n=t[r]).unsub&&n.unsub()},t.prototype.subscribeAll=function(n){if(this.ended)n(cn());else{this.sink=n;for(var t,r=this.subscriptions.slice(),e=0;e<r.length;e++)t=r[e],this.subscribeInput(t)}return this.unsubAll},t.prototype.guardedSink=function(n){var t=this;return function(r){return r.isEnd?(t.unsubscribeInput(n),S):t.sink?t.sink(r):E}},t.prototype.subscribeInput=function(n){return n.unsub=n.input.subscribeInternal(this.guardedSink(n.input)),n.unsub},t.prototype.unsubscribeInput=function(n){for(var t,r=this.subscriptions,e=0;e<r.length;e++)if((t=r[e]).input===n)return"function"===typeof t.unsub&&t.unsub(),void this.subscriptions.splice(e,1)},t}(Ht),cr={asEventStream:function(n,t,r){var e=this;return m.isFunction(t)&&(r=t,t=void 0),it((function(r){return e.on(n,t,r),function(){return e.off(n,t,r)}}),r).withDesc(new U(this.selector||this,"asEventStream",[n]))},init:function(n){n.fn.asEventStream=cr.asEventStream}};n.$=cr,n.Bus=sr,n.CompositeUnsubscribe=En,n.Desc=U,n.End=en,n.Error=un,n.Event=K,n.EventStream=Ht,n.Initial=tn,n.Next=nn,n.Observable=Ut,n.Property=jt,n.Value=Z,n._=m,n.combine=tt,n.combineAsArray=nt,n.combineTemplate=Vt,n.combineWith=function(n){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var e=Kn(arguments),i=(t=e[0],n=e[1],new U("Bacon","combineWith",[n].concat(t)));return nt(t).map((function(t){return n.apply(void 0,t)})).withDesc(i)},n.concatAll=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var r=$n(n);return(r.length?h(y(r),p(r).toEventStream(),(function(n,t){return n.concat(t)})):Cn()).withDesc(new U("Bacon","concatAll",r))},n.constant=Xn,n.fromArray=function(n){if(function(n){if(!i(n))throw new Error("not an array : "+n)}(n),n.length){var t=0,r=new Ht(new U("Bacon","fromArray",[n]),(function(e){var i=!1,u=E,o=!1,s=!1;return q.soonButNotYet(r,(function c(){if(s=!0,!o){if(t===n.length)return e(cn()),!1;for(o=!0;s;)if(s=!1,u!==S&&!i){var f=n[t++];(u=e(fn(f)))!==S&&(t===n.length?e(cn()):q.afterTransaction(r,c))}return o=!1}})),function(){return i=!0}}));return r}return Cn().withDesc(new U("Bacon","fromArray",n))},n.fromBinder=it,n.fromCallback=function(n){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return it((function(r){return or(n,t)(r),e}),(function(n){return[n,cn()]})).withDesc(new U("Bacon","fromCallback",[n].concat(t)))},n.fromESObservable=function(n){var t;t=n[Jt("observable")]?n[Jt("observable")]():n;var r=new U("Bacon","fromESObservable",[t]);return new Ht(r,(function(n){var r=t.subscribe({error:function(t){n(new un(t)),n(new en)},next:function(t){n(new nn(t))},complete:function(){n(new en)}});return r.unsubscribe?function(){r.unsubscribe()}:r}))},n.fromEvent=Zt,n.fromEventTarget=Zt,n.fromNodeCallback=function(n){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return it((function(r){return or(n,t)(r),e}),(function(n,t){return n?[new un(n),cn()]:[t,cn()]})).withDesc(new U("Bacon","fromNodeCallback",[n].concat(t)))},n.fromPoll=ut,n.fromPromise=function(n,t,r){return void 0===r&&(r=rr),it((function(r){var e=n.then(r,(function(n){return r(new un(n))}));return e&&"function"===typeof e.done&&e.done(),t?function(){if("function"===typeof n.abort)return n.abort()}:function(){}}),r).withDesc(new U("Bacon","fromPromise",[n]))},n.getScheduler=function(){return k.scheduler},n.groupSimultaneous=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return Zn($n(n))},n.hasValue=ln,n.interval=ot,n.isEnd=vn,n.isError=pn,n.isEvent=an,n.isInitial=hn,n.isNext=function(n){return n.isNext},n.later=Tt,n.mergeAll=Ot,n.more=E,n.never=Cn,n.noMore=S,n.nullSink=z,n.nullVoidSink=H,n.onValues=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return nt(n.slice(0,n.length-1)).onValues(n[arguments.length-1])},n.once=In,n.repeat=nr,n.repeatedly=function(n,t){var r=0;return ut(n,(function(){return t[r++%t.length]})).withDesc(new U("Bacon","repeatedly",[n,t]))},n.retry=function(n){if(!m.isFunction(n.source))throw new Error("'source' option has to be a function");var t=n.source,r=n.retries||0,e=0,i=n.delay||function(){return 0},u=n.isRetryable||function(){return!0},o=!1,s=null;return nr((function(n){function c(){return t(n).endOnError().transform((function(n,t){return pn(n)?u((s=n).error)&&(0===r||e<r)?E:(o=!0,t(n)):(ln(n)&&(s=null,o=!0),t(n))}))}if(!o){if(s){var f={error:s.error,retriesDone:e},a=tr(i(f));return e++,a.concat(In(null).flatMap(c))}return c()}})).withDesc(new U("Bacon","retry",[n]))},n.sequentially=function(n,t){var r=0;return ut(n,(function(){var n=t[r++];return r<t.length?n:r===t.length?[fn(n),cn()]:cn()})).withDesc(new U("Bacon","sequentially",[n,t]))},n.setScheduler=function(n){k.scheduler=n},n.silence=tr,n.spy=function(n){return Dt.push(n)},n.try=function(n){return function(t){try{return In(n(t))}catch(r){return In(new un(r))}}},n.update=function(n){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var e=jn(t),i=0;i<e.length;i++){var u=e[i];u[1]=$t(u[1])}return Fn.apply(void 0,e).scan(n,(function(n,t){return t(n)})).withDesc(new U("Bacon","update",[n].concat(t)))},n.version="3.0.13",n.when=Fn,n.zipAsArray=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return Fn([m.map((function(n){return n.toEventStream()}),$n(n)),function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return n}]).withDesc(new U("Bacon","zipAsArray",n))},n.zipWith=Lt,Object.defineProperty(n,"__esModule",{value:!0})}(t)}}]);
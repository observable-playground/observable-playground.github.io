<!DOCTYPE html><html lang="en-US"><head><title data-react-helmet="true">RxJS switchMap example</title><link rel="preload" as="script" href="https://observable-playground.github.io/templates/src-dynamic-pages-Example.1dd48936.js"/><link rel="preload" as="script" href="https://observable-playground.github.io/templates/styles.38191d5e.js"/><link rel="preload" as="script" href="https://observable-playground.github.io/templates/vendors~main.d618f77b.js"/><link rel="preload" as="script" href="https://observable-playground.github.io/main.b0d2392c.js"/><link rel="preload" as="style" href="https://observable-playground.github.io/styles.38191d5e.css"/><link rel="stylesheet" href="https://observable-playground.github.io/styles.38191d5e.css"/><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Learn RxJS and play with Observables in online sandbox playground"/><link rel="manifest" href="https://observable-playground.github.io/manifest.json"/></head><body><div id="root"><div style="outline:none" tabindex="-1" role="group"><div class="App"><div class="App__header"><a aria-current="page" class="App__logo active" href="https://observable-playground.github.io/"><span class="App__logo_main">Observable</span> Playground</a></div><div class="App__body"><div class="App__contents"><div style="outline:none" tabindex="-1" role="group"><code>const { chart } = require(&#x27;rp-api&#x27;);
const { palette } = require(&#x27;rp-api/colors&#x27;);
const { Observable } = require(&#x27;rxjs/Rx&#x27;);

// helpers {{{
// stream for coloring
const palette$ = Observable.from(palette);
// fn to define color for item
const Mark = (value,color)=&gt;({value,color});
// like .from, but items are delayed by their value
const fromDelayed = arr =&gt;
  Observable
    .from(arr)
    .delayWhen(x=&gt;Observable.timer(x));
// }}}

const source$ = fromDelayed([ 5, 10, 20 ])
  // get color for each item
  .zip(palette$, Mark);

const switch$ = source$
  .switchMap(x=&gt; Observable
    .timer(0, 3)
    .take(5)
    // inherit color from the source$ stream
    .map(y=&gt;Mark(y, x.color)));


source$.subscribe(chart.createRxObserver());
switch$.subscribe(chart.createRxObserver());
</code></div></div><div class="App__menu"><div class="Menu"><div class="Menu__library-name"><a class="Menu__Link" href="https://observable-playground.github.io/rxjs/">RxJS</a><span class="Menu__library-version">v<!-- -->6.4.0</span></div><div class="Menu__library-name"><a class="Menu__Link" href="https://observable-playground.github.io/baconjs/">Bacon.js</a><span class="Menu__library-version">v<!-- -->2.0.11</span></div><div class="Menu__library-name"><a class="Menu__Link" href="https://observable-playground.github.io/kefir/">Kefir.js</a><span class="Menu__library-version">v<!-- -->3.8.6</span></div><div class="Menu__Gist"><a class="Menu__Link" href="https://observable-playground.github.io/gist/">Load a gist</a></div><hr/><ul class="Menu__examples"><li class="Menu__library"></li><li class="Menu__library"></li><li class="Menu__library"></li></ul></div></div></div><div class="App__footer">v<!-- -->0.3.0</div></div></div></div><script type="text/javascript">
    window.__routeInfo = {"templateIndex":4,"sharedHashesByProp":{},"data":{"libraryName":"RxJS","exampleName":"switchMap","exampleCode":"const { chart } = require('rp-api');\nconst { palette } = require('rp-api/colors');\nconst { Observable } = require('rxjs/Rx');\n\n// helpers {{{\n// stream for coloring\nconst palette$ = Observable.from(palette);\n// fn to define color for item\nconst Mark = (value,color)=>({value,color});\n// like .from, but items are delayed by their value\nconst fromDelayed = arr =>\n  Observable\n    .from(arr)\n    .delayWhen(x=>Observable.timer(x));\n// }}}\n\nconst source$ = fromDelayed([ 5, 10, 20 ])\n  // get color for each item\n  .zip(palette$, Mark);\n\nconst switch$ = source$\n  .switchMap(x=> Observable\n    .timer(0, 3)\n    .take(5)\n    // inherit color from the source$ stream\n    .map(y=>Mark(y, x.color)));\n\n\nsource$.subscribe(chart.createRxObserver());\nswitch$.subscribe(chart.createRxObserver());\n"},"path":"rxjs/switchMap","siteData":{"title":"Observable Playground"}};</script><script defer="" type="text/javascript" src="https://observable-playground.github.io/templates/src-dynamic-pages-Example.1dd48936.js"></script><script defer="" type="text/javascript" src="https://observable-playground.github.io/templates/styles.38191d5e.js"></script><script defer="" type="text/javascript" src="https://observable-playground.github.io/templates/vendors~main.d618f77b.js"></script><script defer="" type="text/javascript" src="https://observable-playground.github.io/main.b0d2392c.js"></script></body></html>